{% extends "layout.html" %}
{%- from "macros/translation.html" import transbag -%}
{%- from "macros/speakers.html" import render_keynote_speaker -%}

{%- set t_intro_location = transbag('translate', this.alt, 'intro_location') -%}
{%- set t_intro_date = transbag('translate', this.alt, 'intro_date') -%}
{%- set t_intro_place = transbag('translate', this.alt, 'intro_place') -%}
{%- set t_title_cfp = transbag('translate', this.alt, 'title_cfp') -%}
{%- set t_title_venue = transbag('translate', this.alt, 'title_venue') -%}
{%- set t_message_cfp = transbag('translate', this.alt, 'message_cfp') -%}
{%- set t_button_cfp = transbag('translate', this.alt, 'button_cfp') -%}
{%- set t_keynote_title = transbag('translate', this.alt, 'keynote_title') -%}

{%- block body -%}
<div class="layout-home">
  <div class="background-wrapper">
    <div class="container">
      <div class="logotype-container logotype logos wow fadeInUp" data-wow-delay="0.4s" data-wow-duration="1.2s">
        <img src="{{ base_url }}dist/images/logotype.svg">
      </div>

      <div class="logo-container logo logos wow fadeInUp" data-wow-delay="0.6s" data-wow-duration="1.2s" data-wow-offset="-1000"></div>

      {% set is_tickets_section_enabled = this.tickets_link and 'tickets' in this.sections %}
      {% set is_speakers_call_section_closed = 'speakers-call' in this.closed_sections %}

      <div class="row event-info">
        {% if is_tickets_section_enabled %}
          <div class="event-ticket col-md-4 offset-md-2 wow fadeInLeft" data-wow-delay="0.6s" data-wow-duration="1.2s" data-wow-offset="-1000">
            <a href="{{ this.tickets_link }}" target="blank_">
              <img src="{{ base_url }}dist/images/ticket_en.svg">
            </a>
          </div>
        {% endif %}
        {% set is_speakers_call_enabled = this.accepted_speakers_link and 'speakers-call' in this.sections %}
        {% if is_speakers_call_enabled %}
          <div class="event-description call-for-papers {{ 'text-center' if not is_tickets_section_enabled else '' }} col-md-{{ '12' if not is_tickets_section_enabled else '5' }} wow fadeInRight" data-wow-delay="0.6s" data-wow-duration="1.2s" data-wow-offset="-1000">
            <div class="wrapper">
              <h1>&lt;{{ t_title_cfp }}/&gt;</h1>
              {% if not is_speakers_call_section_closed %}
                <div class="call-to-actions row">
                  <div class="text-center col-md-12">
                    <a class="btn btn-primary-alt btn-lg hidden" href="{{ this.accepted_speakers_link }}" target="_blank">
                      {{ t_button_cfp }}
                    </a>
                  </div>
                </div>
              {% else %}
                <div class="text-center col-md-12">
                  <p>{{ t_message_cfp }}</p>
                </div>
              {% endif %}
            </div>
          </div>
        {% endif %}
      </div>
    </div>

    {% set speakers = site.query('/keynotes', alt=this.alt).filter(F.keynote).filter(F.publish).order_by('_id') %}

    {% if speakers %}
      <div class="key-speakers-info">
        <div class="bubbles-background clouds">
          <div class="container">
            <div class="row">
              <div class="speakers-title col-md-5 offset-md-1 wow fadeInUp" data-wow-delay="0.4s" data-wow-duration="1.2s">
                <h1>&lt;{{ t_keynote_title }}/&gt;</h1>
              </div>
            </div>
            {% for speaker in speakers %}
                {{ render_keynote_speaker(speaker, index=loop.index, details=True) }}
            {%endfor %}
          </div>
        </div>
      </div>
    {% endif %}
    </div>
    <div class="venue wow fadeInUp" data-wow-delay="0.8s" data-wow-duration="1.2s" data-wow-offset="-1000">
      <div class="container-fluid">
        <div class="row">
          <div class="text-center col-md-12">
            <div class="wow fadeInUp" data-wow-delay="0.4s" data-wow-duration="1.2s">
              <h1 class="title">&lt;{{ t_title_venue }}/&gt;</h1>
            </div>
            <h2>{{ t_intro_place }}</h2>
            <p>{{ t_intro_location }}</p>
            <p>{{ t_intro_date }}</p>
          </div>
        </div> 
        <div class="map row">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.485088353733!2d-75.58152868507172!3d6.199553328563958!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e46827ce55554cf%3A0xab8ed474ed2c00a9!2sEAFIT!5e0!3m2!1sen!2sco!4v1568501525646!5m2!1sen!2sco"
            width="100%" height="250" frameborder="0" style="border:0;" allowfullscreen=""></iframe>
        </div>
      </div>
    </div>
    
    {% include 'partials/_footer.html' %}
  </div>
{%- endblock -%}